{"openapi":"3.0.0","info":{"title":"Documentación APIs SISI-POLIZAS","version":"1.0.0","description":"Documentación de las APIs del aplicativo SISI-POLIZAS"},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"Bearer","bearerFormat":"JWT"}},"schemas":{"VehiculoInput":{"type":"object","properties":{"placa":{"type":"string","description":"Placa del vehículo"},"pasajeros":{"type":"integer","description":"Número de pasajeros del vehículo"}},"required":["placa","pasajeros"]},"PolizaResponse":{"type":"object","properties":{"tipoPoliza":{"type":"string"},"poliza":{"type":"string"},"fechaCargue":{"type":"string","format":"date-time"},"fechaInicio":{"type":"string","format":"date-time"},"fechaFin":{"type":"string","format":"date-time"},"aseguradora":{"type":"string"},"estadoPoliza":{"type":"string"},"cantidadVehiculos":{"type":"string"}}},"VehiculoResponse":{"type":"object","properties":{"placa":{"type":"string","description":"Placa del vehículo"},"pasajeros":{"type":"integer","format":"int32","description":"Número de pasajeros del vehículo"},"nit":{"type":"string","description":"NIT de la póliza asociada al vehículo"},"razon_social":{"type":"string","description":"Razón social de la póliza asociada al vehículo"},"tipo":{"type":"string","description":"Tipo de póliza asociada al vehículo"},"numero_poliza":{"type":"string","description":"Número de la póliza asociada al vehículo"}}},"id":{"type":"int","example":{"id":1}},"Aseguradora":{"$ref":"#/definitions/aseguradora","example":{"id":"1,","nit":"100100,","nombre":"Aseguradora 1,","direccion":"call 27 J,","telefono":"null,","estado":true}},"AseguradoraAll":{"$ref":"#/definitions/aseguradoraAll","example":{"id":"1,","nit":"100100,","nombre":"Aseguradora 1,","direccion":"call 27 J,","telefono":"null,","estado":"true,","created_at":"2024-04-23T15:55:24.535-05:00","updated_at":"2024-04-23T15:55:24.535-05:00"}},"AseguradoraInput":{"type":"object","required":["nit","nombre","direccion","telefono"],"properties":{"nit":{"type":"integer","description":"NIT de la aseguradora"},"nombre":{"type":"string","description":"Nombre de la aseguradora"},"direccion":{"type":"string","description":"Dirección de la aseguradora"},"telefono":{"type":"integer","description":"Número de teléfono de la aseguradora"}}},"AseguradoraMaestra":{"$ref":"#/definitions/aseguradoraMaestra","example":{"id":"1,","nombre":"Especial,","estado":true}},"AseguradoraUpdate":{"type":"object","required":["id"],"properties":{"id":{"type":"integer","description":"ID de la aseguradora a actualizar"},"nit":{"type":"string","description":"NIT de la aseguradora"},"nombre":{"type":"string","description":"Nombre de la aseguradora"},"direccion":{"type":"string","description":"Dirección de la aseguradora"},"telefono":{"type":"integer","description":"Número de teléfono de la aseguradora (opcional)"},"estado":{"type":"boolean","description":"Estado de la aseguradora (opcional)"}}},"CapacidadInput":{"type":"object","properties":{"numero":{"type":"integer","description":"Número de la capacidad"},"vigencia":{"type":"string","format":"date","description":"Fecha de vigencia de la capacidad"},"modalidadId":{"type":"integer","description":"ID de la modalidad asociada a la capacidad"},"nombre":{"type":"string","description":"Nombre del archivo de la capacidad"},"nombreOriginal":{"type":"string","description":"Nombre original del archivo de la capacidad"},"ruta":{"type":"string","description":"Ruta del archivo de la capacidad en el sistema"}},"required":["numero","vigencia","modalidadId","nombre","nombreOriginal","ruta"]},"claveTemporal":{"type":"bool","description":"validar si el usuario esta bloqueado","example":false},"Modalidad":{"$ref":"#/definitions/modalidad","example":{"id":"1,","nombre":"Especial,","estado":true}},"modulo":{"$ref":"#/definitions/Modulo","example":{"id":"101,","nombre":"Inicio,","ruta":"/general"}},"paginacion":{"$ref":"#/definitions/paginacion","example":{"totalRegistros":2,"paginaActual":1,"totalPaginas":2}},"PolizaInput":{"type":"object","required":["polizaContractual"],"properties":{"polizaContractual":{"$ref":"#/components/schemas/PolizaContractualInput"},"polizaExtracontractual":{"$ref":"#/components/schemas/PolizaExtracontractualInput"}}},"PolizaContractualInput":{"type":"object","required":["numero","aseguradoraId","inicioVigencia","finVigencia"],"properties":{"numero":{"type":"integer","description":"Número de la póliza contractual"},"aseguradoraId":{"type":"integer","description":"ID de la aseguradora asociada a la póliza"},"inicioVigencia":{"type":"string","format":"date","description":"Fecha de inicio de vigencia de la póliza"},"finVigencia":{"type":"string","format":"date","description":"Fecha de fin de vigencia de la póliza"},"amparos":{"type":"array","items":{"$ref":"#/components/schemas/AmparoInput"}},"responsabilidad":{"$ref":"#/components/schemas/ResponsabilidadInput"},"caratula":{"$ref":"#/components/schemas/CaratulaInput"}}},"PolizaExtracontractualInput":{"type":"object","required":["numero","aseguradoraId","inicioVigencia","finVigencia"],"properties":{"numero":{"type":"integer","description":"Número de la póliza extracontractual"},"aseguradoraId":{"type":"integer","description":"ID de la aseguradora asociada a la póliza"},"inicioVigencia":{"type":"string","format":"date","description":"Fecha de inicio de vigencia de la póliza"},"finVigencia":{"type":"string","format":"date","description":"Fecha de fin de vigencia de la póliza"},"amparos":{"type":"array","items":{"$ref":"#/components/schemas/AmparoInput"}},"responsabilidad":{"$ref":"#/components/schemas/ResponsabilidadInput"},"caratula":{"$ref":"#/components/schemas/CaratulaInput"}}},"AmparoInput":{"type":"object","required":["coberturaId","valorAsegurado","limite","deducible"],"properties":{"coberturaId":{"type":"integer","description":"ID de la cobertura asociada al amparo"},"valorAsegurado":{"type":"integer","description":"Valor asegurado para el amparo"},"limite":{"type":"integer","description":"Límite para el amparo"},"deducible":{"type":"integer","description":"Deducible para el amparo"}}},"ResponsabilidadInput":{"type":"object","required":["fechaConstitucion","resolucion","fechaResolucion","valorReserva","fechaReserva","informacion","operacion","valorCumplimientoUno","valorCumplimientoDos"],"properties":{"fechaConstitucion":{"type":"string","format":"date","description":"Fecha de constitución de la responsabilidad"},"resolucion":{"type":"integer","description":"Número de resolución de la responsabilidad"},"fechaResolucion":{"type":"string","format":"date","description":"Fecha de resolución de la responsabilidad"},"valorReserva":{"type":"integer","description":"Valor de reserva para la responsabilidad"},"fechaReserva":{"type":"string","format":"date","description":"Fecha de reserva para la responsabilidad"},"informacion":{"type":"string","description":"Información complementaria para la responsabilidad"},"operacion":{"type":"integer","description":"Operación asociada a la responsabilidad"},"valorCumplimientoUno":{"type":"integer","description":"Valor de cumplimiento uno para la responsabilidad"},"valorCumplimientoDos":{"type":"integer","description":"Valor de cumplimiento dos para la responsabilidad"}}},"CaratulaInput":{"type":"object","required":["nombre","nombreOriginal","ruta"],"properties":{"nombre":{"type":"string","description":"Nombre del archivo de la carátula"},"nombreOriginal":{"type":"string","description":"Nombre original del archivo de la carátula"},"ruta":{"type":"string","description":"Ruta del archivo de la carátula en el sistema"}}},"Poliza":{"type":"object","properties":{"polizaContractual":{"$ref":"#/components/schemas/PolizaContractual"},"polizaExtracontractual":{"$ref":"#/components/schemas/PolizaExtracontractual"}}},"PolizaContractual":{"type":"object","properties":{"numero":{"type":"integer","description":"Número de la póliza contractual"},"aseguradoraId":{"type":"integer","description":"ID de la aseguradora asociada a la póliza"},"inicioVigencia":{"type":"string","format":"date","description":"Fecha de inicio de vigencia de la póliza"},"finVigencia":{"type":"string","format":"date","description":"Fecha de fin de vigencia de la póliza"},"amparos":{"type":"array","items":{"$ref":"#/components/schemas/Amparo"}},"responsabilidad":{"$ref":"#/components/schemas/Responsabilidad"},"caratula":{"$ref":"#/components/schemas/Caratula"}}},"PolizaExtracontractual":{"type":"object","properties":{"numero":{"type":"integer","description":"Número de la póliza extracontractual"},"aseguradoraId":{"type":"integer","description":"ID de la aseguradora asociada a la póliza"},"inicioVigencia":{"type":"string","format":"date","description":"Fecha de inicio de vigencia de la póliza"},"finVigencia":{"type":"string","format":"date","description":"Fecha de fin de vigencia de la póliza"},"amparos":{"type":"array","items":{"$ref":"#/components/schemas/Amparo"}},"responsabilidad":{"$ref":"#/components/schemas/Responsabilidad"},"caratula":{"$ref":"#/components/schemas/Caratula"}}},"Amparo":{"type":"object","properties":{"coberturaId":{"type":"integer","description":"ID de la cobertura asociada al amparo"},"valorAsegurado":{"type":"integer","description":"Valor asegurado para el amparo"},"limite":{"type":"integer","description":"Límite para el amparo"},"deducible":{"type":"integer","description":"Deducible para el amparo"}}},"Responsabilidad":{"type":"object","properties":{"fechaConstitucion":{"type":"string","format":"date","description":"Fecha de constitución de la responsabilidad"},"resolucion":{"type":"integer","description":"Número de resolución de la responsabilidad"},"fechaResolucion":{"type":"string","format":"date","description":"Fecha de resolución de la responsabilidad"},"valorReserva":{"type":"integer","description":"Valor de reserva para la responsabilidad"},"fechaReserva":{"type":"string","format":"date","description":"Fecha de reserva para la responsabilidad"},"informacion":{"type":"string","description":"Información complementaria para la responsabilidad"},"operacion":{"type":"integer","description":"Operación asociada a la responsabilidad"},"valorCumplimientoUno":{"type":"integer","description":"Valor de cumplimiento uno para la responsabilidad"},"valorCumplimientoDos":{"type":"integer","description":"Valor de cumplimiento dos para la responsabilidad"}}},"Caratula":{"type":"object","properties":{"nombre":{"type":"string","description":"Nombre del archivo de la carátula"},"nombreOriginal":{"type":"string","description":"Nombre original del archivo de la carátula"},"ruta":{"type":"string","description":"Ruta del archivo de la carátula en el sistema"}}},"Rol":{"$ref":"#/definitions/Rol","example":{"_id":"003,","_nombre":"vigilado,","_root":"true,","_estado":"false,","_creacion":"2024-03-19T17:32:28.342-05:00,","_actualizacion":"2024-03-19T17:32:28.342-05:00,"}},"tiposAmparo":{"$ref":"#/definitions/tiposAmparo","example":{"id":1,"nombre":"AMPAROS BÁSICOS","orden":1,"estado":true}},"token":{"type":"string","description":"token de autenticación","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkb2N1bWVudG8iOiI5MDA0NjExOTYiLCJpZFJvbCI6IjAwMyIsImlhdCI6MTcxMDI4MDY2NiwiZXhwIjoxNzEwMzY3MDY2fQ.ANhxg9ym3WQUug0Y5IZWj_ZQOYRGdw5HODMAdFRxx9A"},"Usuario":{"$ref":"#/definitions/Usuario","example":{"id":"dc18f0da-6c3b-4dcb-b551-23bb3be299f7","nombre":"Jose","usuario":200200200,"clave":"ed3424dfsf","telefono":3000000000,"correo":"correo@hotmail.com","fecha_nacimiento":"2022-11-20 13:00:26","cargo":"vigilado","apellido":"herrera","identificacion":200200200,"id_rol":3}},"usuarioLogin":{"$ref":"#/definitions/usuarioLogin","example":{"id":"fda32ceec-37d5b-40wff-b3d08-feb8a71","usuario":12221313,"nombre":"USUARIO LOGUEADO.","apellido":null,"telefono":null,"correo":"correo@gmail.com"}}}},"paths":{"/api/v1/archivos":{"post":{"tags":["Archivos"],"description":"Guardar un archivo","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"archivo":{"type":"string","format":"binary"}}}}}},"responses":{"200":{"description":"Archivo guardado exitosamente","content":{"application/json":{"schema":{"type":"object","properties":{"nombreAlmacenado":{"type":"string","description":"Nombre del archivo almacenado"},"nombreOriginalArchivo":{"type":"string","description":"Nombre original del archivo"},"ruta":{"type":"string","description":"Ruta donde se almacenó el archivo"}}}}}}}}},"/api/v1/aseguradoras":{"put":{"tags":["Aseguradoras"],"security":[{"bearerAuth":[]}],"description":"Actualizar una aseguradora existente","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AseguradoraUpdate"}}}},"produces":["application/json"],"responses":{"200":{"description":"Aseguradora actualizada exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AseguradoraAll"}}}}}},"post":{"tags":["Aseguradoras"],"security":[{"bearerAuth":[]}],"description":"Crear una nueva aseguradora","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AseguradoraInput"}}}},"produces":["application/json"],"responses":{"201":{"description":"Aseguradora creada exitosamente","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AseguradoraAll"}}}}}},"get":{"tags":["Aseguradoras"],"security":[{"bearerAuth":[]}],"description":"Obtener el listado de aseguradoras","parameters":[{"name":"pagina","in":"query","type":"int"},{"name":"limite","in":"query","type":"int"}],"produces":["application/json"],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"type":"object","properties":{"aseguradoras":{"type":"array","items":{"$ref":"#/components/schemas/Aseguradora"}},"paginacion":{"$ref":"#/components/schemas/paginacion"}}}}}}}}},"/api/v1/aseguradoras/{id}":{"delete":{"tags":["Aseguradoras"],"security":[{"bearerAuth":[]}],"description":"Eliminar una aseguradora por su ID","parameters":[{"name":"id","in":"path","description":"ID de la aseguradora a eliminar","required":true,"schema":{"type":"integer"}}],"responses":{"204":{"description":"Aseguradora eliminada exitosamente"},"404":{"description":"No se encontró la aseguradora con el ID especificado"}}},"get":{"tags":["Aseguradoras"],"security":[{"bearerAuth":[]}],"description":"Obtener una aseguradora por su ID","parameters":[{"name":"id","in":"path","description":"ID de la aseguradora a obtener","required":true,"schema":{"type":"integer"}}],"produces":["application/json"],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Aseguradora"}}}}}}},"/api/v1/autenticacion/cambiar-clave":{"post":{"tags":["Autenticación"],"description":"cambiar contraseña","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["identificacion","clave","nuevaClave"],"properties":{"identificacion":{"type":"integer"},"clave":{"type":"string"},"nuevaClave":{"type":"string"}}}}}},"produces":["application/json"],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"type":"object","properties":{"mensaje":{"type":"string"},"estado":{"type":"integer"}},"example":{"mensaje":"Su contraseña ha sido cambiada exitosamente","estado":200}}}}},"400":{"description":"Petición fallida","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}},"example":{"message":"Credenciales incorrectas, por favor intente recuperar contraseña con su correo registrado en Vigia"}}}}}}}},"/api/v1/autenticacion/inicio-sesion":{"post":{"tags":["Autenticación"],"description":"inicio de sesión","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["usuario","contrasena"],"properties":{"usuario":{"type":"integer"},"contrasena":{"type":"string"}}}}}},"produces":["application/json"],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"type":"object","properties":{"usuario":{"$ref":"#/components/schemas/usuarioLogin"},"token":{"$ref":"#/components/schemas/token"},"rol":{"type":"object","properties":{"id":{"type":"string","example":"101"},"nombre":{"type":"string","example":"Administrador"},"modulos":{"type":"array","items":{"$ref":"#/components/schemas/modulo"}}}},"claveTemporal":{"$ref":"#/components/schemas/claveTemporal"}}}}}}}}},"/api/v1/envio-email":{"post":{"tags":["Autenticación"],"description":"olvido la contraseña","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["usuario","correo"],"properties":{"usuario":{"type":"integer"},"correo":{"type":"string"}}}}}},"produces":["application/json"],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"type":"object","properties":{"mensaje":{"type":"string"}},"example":{"mensaje":"Mensaje enviado correctamente"}}}}},"400":{"description":"Petición fallida","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}},"example":{"message":"usuario no encontrado y/o correo incorrecto"}}}}}}}},"/api/v1/rol":{"get":{"tags":["Rol"],"security":[{"bearerAuth":[]}],"description":"Listar roles","produces":["application/json"],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"type":"object","properties":{"rols":{"type":"array","items":{"$ref":"#/components/schemas/Rol"}}}}}}}}}},"/api/v1/maestras/aseguradoras":{"get":{"tags":["Maestras"],"security":[{"bearerAuth":[]}],"description":"Obtener el listado de aseguradoras","produces":["application/json"],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AseguradoraMaestra"}}}}}}}},"/api/v1/maestras/modalidades":{"get":{"tags":["Maestras"],"security":[{"bearerAuth":[]}],"description":"Obtener el listado de modalidades","produces":["application/json"],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Modalidad"}}}}}}}},"/api/v1/poliza/agregar_vehiculos":{"post":{"tags":["Polizas"],"description":"Agregar vehículos a una póliza","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"poliza":{"type":"integer","description":"Número de la póliza"},"tipoPoliza":{"type":"integer","description":"Tipo de póliza"},"vehiculos":{"type":"array","items":{"$ref":"#/components/schemas/VehiculoInput"}}},"required":["poliza","tipoPoliza","vehiculos"]}}}},"responses":{"200":{"description":"Vehículos agregados con éxito","content":{"application/json":{"schema":{"type":"object","properties":{"mensaje":{"type":"string"},"estado":{"type":"integer"}}}}}}}}},"/api/v1/poliza/capacidades":{"post":{"tags":["Polizas"],"description":"Guardar capacidades de una póliza","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"capacidades":{"type":"array","items":{"$ref":"#/components/schemas/CapacidadInput"}}}}}}},"responses":{"200":{"description":"Capacidades guardadas correctamente","content":{"application/json":{"schema":{"type":"object","properties":{"mensaje":{"type":"string"}}}}}}}}},"/api/v1/poliza/desvincular-placa":{"patch":{"tags":["Polizas"],"description":"Desvincular una placa de una póliza.","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"id","required":true,"schema":{"type":"integer"},"description":"ID de la placa que se desea desvincular."},{"in":"query","name":"motivo","required":true,"schema":{"type":"string"},"description":"Motivo de la desvinculación de la placa."}],"responses":{"200":{"description":"Placa desvinculada exitosamente","content":{"application/json":{"schema":{"type":"object","properties":{"mensaje":{"type":"string","description":"Mensaje de confirmación de la desvinculación"},"estado":{"type":"integer","description":"Código de estado HTTP"}}}}}}}}},"/api/v1/poliza/eliminar_vehiculos":{"delete":{"tags":["Polizas"],"description":"Eliminar vehículos de una póliza","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"poliza":{"type":"integer","description":"Número de la póliza"},"tipoPoliza":{"type":"integer","description":"Tipo de póliza"},"placas":{"type":"array","items":{"type":"string"},"description":"Lista de placas de los vehículos a eliminar"}},"required":["poliza","tipoPoliza","placas"]}}}},"responses":{"200":{"description":"Vehículos eliminados con éxito","content":{"application/json":{"schema":{"type":"object","properties":{"mensaje":{"type":"string"},"estado":{"type":"integer"}}}}}}}}},"/api/v1/poliza/gestionar-placa":{"get":{"tags":["Polizas"],"description":"Obtener la información de una placa específica, incluyendo los detalles de póliza y novedades asociadas.","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"placa","required":true,"schema":{"type":"string"},"description":"Placa del vehículo"}],"responses":{"200":{"description":"Información de la placa obtenida exitosamente","content":{"application/json":{"schema":{"type":"object","properties":{"contractual":{"type":"object","properties":{"id":{"type":"integer"},"poliza":{"type":"string"},"estadoPoliza":{"type":"string"},"fechaCargue":{"type":"string","format":"date-time"},"fechaInicio":{"type":"string","format":"date-time"},"fechaFin":{"type":"string","format":"date-time"},"vinculada":{"type":"boolean"},"observacion":{"type":"string"},"existe":{"type":"boolean"},"mensaje":{"type":"string"}}},"extraContractual":{"type":"object","properties":{"id":{"type":"integer"},"poliza":{"type":"string"},"estadoPoliza":{"type":"string"},"fechaCargue":{"type":"string","format":"date-time"},"fechaInicio":{"type":"string","format":"date-time"},"fechaFin":{"type":"string","format":"date-time"},"vinculada":{"type":"boolean"},"observacion":{"type":"string"},"existe":{"type":"boolean"},"mensaje":{"type":"string"}}},"novedades":{"type":"array","items":{"type":"object","properties":{"tipoPoliza":{"type":"integer"},"poliza":{"type":"string"},"placa":{"type":"string"},"fechaActualizacion":{"type":"string","format":"date-time"},"estado":{"type":"string"},"observacion":{"type":"string"}}}},"historial":{"type":"array","items":{"type":"object","properties":{"tipoPoliza":{"type":"string"},"poliza":{"type":"string"},"placa":{"type":"string"},"estadoPoliza":{"type":"string"},"fechaCargue":{"type":"string","format":"date-time"},"fechaInicio":{"type":"string","format":"date-time"},"fechaFin":{"type":"string","format":"date-time"},"aseguradora":{"type":"string"}}}}}}}}}}}},"/api/v1/poliza":{"post":{"tags":["Polizas"],"security":[{"bearerAuth":[]}],"description":"Guardar una nueva póliza","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PolizaInput"}}}},"produces":["application/json"],"responses":{"201":{"description":"Póliza guardada exitosamente","content":{"application/json":{"schema":{"type":"object","properties":{"mensaje":{"type":"string","description":"Mensaje de la respuesta"}}}}}}}}},"/api/v1/poliza/listar_polizas":{"get":{"tags":["Polizas"],"security":[{"bearerAuth":[]}],"description":"Listar pólizas con filtros opcionales","parameters":[{"name":"pagina","in":"query","description":"Número de página para paginación","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"limite","in":"query","description":"Número máximo de resultados por página","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"poliza","in":"query","description":"Número de póliza para filtrar","required":false,"schema":{"type":"string"}},{"name":"tipoPoliza","in":"query","description":"Tipo de póliza para filtrar","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"fechaInicio","in":"query","description":"Fecha de inicio para filtrar las pólizas","required":false,"schema":{"type":"string","format":"date"}},{"name":"fechaFin","in":"query","description":"Fecha de fin para filtrar las pólizas","required":false,"schema":{"type":"string","format":"date"}}],"responses":{"200":{"description":"Lista de pólizas obtenida exitosamente","content":{"application/json":{"schema":{"type":"object","properties":{"polizas":{"type":"array","items":{"$ref":"#/components/schemas/PolizaResponse"}},"paginacion":{"$ref":"#/components/schemas/paginacion"},"totalVehiculos":{"type":"string","description":"Total de vehículos"},"totalVehiculosContractual":{"type":"string","description":"Total de vehículos contractual"},"totalVehiculosExtraContractual":{"type":"string","description":"Total de vehículos extra contractual"}}}}}}}}},"/api/v1/poliza/listar_vehiculos":{"get":{"tags":["Polizas"],"security":[{"bearerAuth":[]}],"description":"Listar vehículos asociados a una póliza","parameters":[{"name":"poliza","in":"query","description":"Número de póliza para filtrar los vehículos","required":true,"schema":{"type":"string"}},{"name":"tipoPoliza","in":"query","description":"Tipo de póliza para filtrar los vehículos","required":true,"schema":{"type":"integer","format":"int32"}},{"name":"placa","in":"query","description":"Número de placa para filtrar los vehículos","required":false,"schema":{"type":"string"}},{"name":"pagina","in":"query","description":"Número de página para paginación","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"limite","in":"query","description":"Número máximo de resultados por página","required":false,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"Lista de vehículos obtenida exitosamente","content":{"application/json":{"schema":{"type":"object","properties":{"vehiculos":{"type":"array","items":{"$ref":"#/components/schemas/VehiculoResponse"}},"paginacion":{"$ref":"#/components/schemas/paginacion"}}}}}}}}},"/api/v1/poliza/novedades_poliza":{"get":{"tags":["Polizas"],"description":"Obtener las novedades de una póliza","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"poliza","required":true,"schema":{"type":"string"},"description":"Número de la póliza"},{"in":"query","name":"tipoPoliza","required":true,"schema":{"type":"integer"},"description":"Tipo de póliza"}],"responses":{"200":{"description":"Novedades de la póliza obtenidas exitosamente","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"tipoPoliza":{"type":"integer","description":"Tipo de póliza"},"poliza":{"type":"string","description":"Número de la póliza"},"placa":{"type":"string","description":"Placa del vehículo"},"fechaActualizacion":{"type":"string","format":"date-time","description":"Fecha de la última actualización"},"estado":{"type":"string","description":"Estado de la novedad"},"observacion":{"type":"string","description":"Observación de la novedad"}}}}}}}}}},"/api/v1/poliza/vehiculos":{"get":{"tags":["Polizas"],"security":[{"bearerAuth":[]}],"description":"Obtener vehículos asociados a una póliza","parameters":[{"name":"pagina","in":"query","description":"Número de página","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"limite","in":"query","description":"Límite de resultados por página","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"vigiladoId","in":"query","description":"ID del vigilado","required":false,"schema":{"type":"string"}},{"name":"termino","in":"query","description":"Término de búsqueda","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"type":"object","properties":{"placas":{"type":"array","items":{"$ref":"#/components/schemas/VehiculoResponse"}},"paginacion":{"$ref":"#/components/schemas/paginacion"}}}}}}}}},"/api/v1/usuarios/{documento}":{"patch":{"tags":["Usuario"],"security":[{"bearerAuth":[]}],"description":"Actualizar un usuario","parameters":[{"name":"documento","in":"path","type":"int"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"nombre":{"type":"string"},"apellido":{"type":"string"},"cargo":{"type":"string"},"identificacion":{"type":"integer"},"telefono":{"type":"string"},"correo":{"type":"string"},"fechaNacimiento":{"type":"string"},"idRol":{"type":"string"}}}}}},"produces":["application/json"],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","example":"dc18f0da-6c3b-4dcb-b551-23bb3be299f7"},"nombre":{"type":"string","example":"Jose"},"usuario":{"type":"string","example":200200200},"clave":{"type":"string","example":"ed3424dfsf"},"telefono":{"type":"string","example":3000000000},"correo":{"type":"string","example":"correo@hotmail.com"},"fecha_nacimiento":{"type":"string","example":"2022-11-20 13:00:26"},"cargo":{"type":"string","example":"vigilado"},"apellido":{"type":"string","example":"herrera"},"identificacion":{"type":"integer","example":200200200},"id_rol":{"type":"string","example":3}}}}}}}}},"/api/v1/usuarios/registro":{"post":{"tags":["Usuario"],"security":[{"bearerAuth":[]}],"description":"Registrar un usuario","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"nombre":{"type":"string"},"apellido":{"type":"string"},"cargo":{"type":"string"},"identificacion":{"type":"integer"},"telefono":{"type":"string"},"correo":{"type":"string"},"fechaNacimiento":{"type":"string"},"idRol":{"type":"string"}}}}}},"produces":["application/json"],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","example":"dc18f0da-6c3b-4dcb-b551-23bb3be299f7"},"nombre":{"type":"string","example":"Jose"},"usuario":{"type":"string","example":200200200},"clave":{"type":"string","example":"ed3424dfsf"},"telefono":{"type":"string","example":3000000000},"correo":{"type":"string","example":"correo@hotmail.com"},"fecha_nacimiento":{"type":"string","example":"2022-11-20 13:00:26"},"cargo":{"type":"string","example":"vigilado"},"apellido":{"type":"string","example":"herrera"},"identificacion":{"type":"integer","example":200200200},"id_rol":{"type":"string","example":3}}}}}}}}},"/api/v1/usuarios/listar?termino={termino}&rol={rol}&pagina={pagina}&limite={limite}":{"get":{"tags":["Usuario"],"security":[{"bearerAuth":[]}],"description":"Listar usuarios","parameters":[{"name":"termino","in":"path","type":"string","required":false},{"name":"rol","in":"path","type":"string","required":false},{"name":"pagina","in":"path","type":"int","required":false},{"name":"limite","in":"path","type":"int","required":false}],"produces":["application/json"],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"type":"object","properties":{"usuarios":{"type":"array","items":{"$ref":"#/components/schemas/Usuario"}},"paginacion":{"$ref":"#/components/schemas/paginacion"}}}}}}}}},"/api/v1/usuarios/usuario/{documento}":{"get":{"tags":["Usuario"],"security":[{"bearerAuth":[]}],"description":"Consultar un usuario","parameters":[{"name":"documento","in":"path","type":"int"}],"produces":["application/json"],"responses":{"200":{"description":"Petición exitosa","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","example":"dc18f0da-6c3b-4dcb-b551-23bb3be299f7"},"nombre":{"type":"string","example":"Jose"},"usuario":{"type":"string","example":200200200},"clave":{"type":"string","example":"ed3424dfsf"},"telefono":{"type":"string","example":3000000000},"correo":{"type":"string","example":"correo@hotmail.com"},"fecha_nacimiento":{"type":"string","example":"2022-11-20 13:00:26"},"cargo":{"type":"string","example":"vigilado"},"apellido":{"type":"string","example":"herrera"},"identificacion":{"type":"integer","example":200200200},"id_rol":{"type":"string","example":3}}}}}}}}},"/api/v1/vehiculos/importar":{"post":{"tags":["Vehiculos"],"description":"Importar un archivo Excel con placas y pasajeros","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"archivo":{"type":"string","format":"binary"},"poliza":{"type":"string"}}}}}},"responses":{"200":{"description":"Respuesta exitosa","content":{"application/json":{"schema":{"type":"object","properties":{"mensaje":{"type":"string"}}}}}},"400":{"description":"Respuesta con errores","content":{"application/json":{"schema":{"type":"object","properties":{"errores":{"type":"array","items":{"$ref":"#/components/schemas/ErrorImportacion"}},"archivo":{"type":"string","description":"Archivo en formato Base64"}}}}}}}},"components":{"schemas":{"ErrorImportacion":{"type":"object","properties":{"columna":{"type":"string","description":"Columna del error"},"fila":{"type":"string","description":"Fila del error"},"error":{"type":"string","description":"Descripción del error"},"valor":{"type":"string","description":"Valor asociado al error"}}}}}},"/api/v1/vehiculos/plantillas/{nombreArchivo}":{"get":{"tags":["Vehiculos"],"description":"Descargar una plantilla de vehículos en formato Base64 (vehiculos.xlsx)","parameters":[{"name":"nombreArchivo","in":"path","description":"Nombre del archivo a descargar","required":true,"schema":{"type":"string"}}],"produces":["application/octet-stream"],"responses":{"200":{"description":"Archivo descargado exitosamente","content":{"application/octet-stream":{"schema":{"type":"string","format":"binary"}}}}}}}},"definitions":{"aseguradora":{"type":"object","properties":{"id":{"type":"number"},"nit":{"type":"string"},"nombre":{"type":"string"},"direccion":{"type":"string"},"telefono":{"type":"number"},"estado":{"type":"boolean"}}},"aseguradoraAll":{"type":"object","properties":{"id":{"type":"number"},"nit":{"type":"string"},"nombre":{"type":"string"},"direccion":{"type":"string"},"telefono":{"type":"number"},"estado":{"type":"boolean"},"created_at":{"type":"string"},"updated_at":{"type":"string"}}},"aseguradoraMaestra":{"type":"object","properties":{"id":{"type":"number"},"nit":{"type":"string"},"nombre":{"type":"string"},"estado":{"type":"boolean"}}},"modalidad":{"type":"object","properties":{"id":{"type":"number"},"nombre":{"type":"string"},"estado":{"type":"boolean"}}},"Modulo":{"type":"object","properties":{"id":{"type":"string"},"nombre":{"type":"string"},"ruta":{"type":"string"}}},"paginacion":{"type":"object","properties":{"totalRegistros":{"type":"integer"},"paginaActual":{"type":"integer"},"totalPaginas":{"type":"integer"}}},"Rol":{"type":"object","properties":{"_id":{"type":"string"},"_nombre":{"type":"string"},"_root":{"type":"bool"},"_estado":{"type":"bool"},"_creacion":{"type":"string"},"_actualizacion":{"type":"string"}}},"tiposAmparo":{"type":"object","properties":{"id":{"type":"integer"},"nombre":{"type":"string"},"orden":{"type":"integer"},"estado":{"type":"bool"}}},"Usuario":{"type":"object","properties":{"id":{"type":"string"},"nombre":{"type":"string"},"usuario":{"type":"string"},"clave":{"type":"string"},"telefono":{"type":"string"},"correo":{"type":"string"},"fecha_nacimiento":{"type":"string"},"cargo":{"type":"string"},"apellido":{"type":"string"},"identificacion":{"type":"integer"},"id_rol":{"type":"string"}}},"usuarioLogin":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"Identificador del usuario"},"usuario":{"type":"string","description":"Nombre de usuario"},"nombre":{"type":"string","description":"Nombre del usuario"},"apellido":{"type":"string","description":"Apellido del usuario"},"telefono":{"type":"string","description":"Teléfono del usuario"},"correo":{"type":"string","description":"Correo del usuario"}}}},"tags":[]}